diff --git a/src/core/metacling/src/TCling.cxx b/src/core/metacling/src/TCling.cxx
index a095668c11..c21c443edd 100644
--- a/src/core/metacling/src/TCling.cxx
+++ b/src/core/metacling/src/TCling.cxx
@@ -2630,7 +2630,7 @@ void TCling::InspectMembers(TMemberInspector& insp, const void* obj,
 
       if (!ispointer) {
          const clang::CXXRecordDecl* fieldRecDecl = memNonPtrType->getAsCXXRecordDecl();
-         if (fieldRecDecl) {
+         if (fieldRecDecl && !fieldRecDecl->isAnonymousStructOrUnion()) {
             // nested objects get an extra call to InspectMember
             // R__insp.InspectMember("FileStat_t", (void*)&fFileStat, "fFileStat.", false);
             std::string sFieldRecName;
diff --git a/src/core/base/src/TMemberInspector.cxx b/src/core/base/src/TMemberInspector.cxx
index 8cb8f8d915..6f29f64c39 100644
--- a/src/core/base/src/TMemberInspector.cxx
+++ b/src/core/base/src/TMemberInspector.cxx
@@ -41,7 +41,7 @@ void TMemberInspector::TParentBuf::Append(const char* add)
    // Add "add" to string
    if (!add || !add[0]) return;
    Ssiz_t addlen = strlen(add);
-   fBuf.reserve(fLen + addlen);
+   fBuf.resize(fLen + addlen + (fLen ? 0 : 1));
    const char* i = add;
    while (*i) {
       fBuf[fLen++] = *i;
